{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Modal/Modal.js","components/Button/Button.js","services/API.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","SearchBar","onSubmit","useState","query","setQuery","className","styles","Searchbar","SearchForm","event","preventDefault","trim","toast","error","type","SearchForm__button","SearchForm__button_label","SearchForm__input","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","toLowerCase","ImageGalleryItem","image","modalImage","description","onModalClick","onClick","src","alt","ImageGalleryItem__image","ImageGallery","images","map","index","id","webformatURL","largeImageURL","tags","split","uuidv4","LoaderSpinner","Loader","color","height","width","Modal","currentImage","useEffect","window","addEventListener","closeModalByEsc","removeEventListener","e","code","Overlay","target","Button","onSearch","ImageApi","searchQuery","page","a","fetch","result","ok","message","status","Error","json","hits","totalHits","App","setImages","currentPage","setCurrentPage","totalImages","setTotalImages","showModal","setShowModal","showLoader","setShowLoader","activeImageIndex","setActiveImageIndex","fetchImageOrPhoto","length","theme","fetchImages","scrollTo","top","document","documentElement","scrollHeight","behavior","modalToggle","autoClose","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7460aa92.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3dYNA\",\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__1fL_x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__yfbx_\",\"Modal\":\"Modal_Modal__1_J_O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2o8gu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__33OOr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__182IG\"};","import { useState } from 'react';\nimport { toast } from 'react-toastify';\n// import PropTypes from 'prop-types';\n\nimport styles from './Searchbar.module.css';\n\nfunction SearchBar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n\n  const handleInputChange = event => {\n    setQuery(event.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    if (query.trim() === '') {\n      return toast.error('Enter your query');\n    }\n    onSubmit(query);\n    setQuery('');\n  };\n\n  return (\n    <header className={styles.Searchbar}>\n      <form className={styles.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={styles.SearchForm__button}>\n          <span className={styles.SearchForm__button_label}>Search</span>\n        </button>\n\n        <input\n          className={styles.SearchForm__input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={query}\n          onChange={handleInputChange}\n        />\n      </form>\n    </header>\n  );\n}\n\n// Searchbar.propTypes = {\n//   onSubmit: PropTypes.func.isRequired,\n// };\n\nexport default SearchBar;\n","import propTypes from 'prop-types';\n\nimport styles from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ image, modalImage, description, onModalClick }) {\n  return (\n    <li className={styles.ImageGalleryItem} onClick={onModalClick}>\n      <img\n        src={image}\n        data-src={modalImage}\n        alt={description}\n        className={styles.ImageGalleryItem__image}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  // image: propTypes.string.isRequired,\n  modalImage: propTypes.string.isRequired,\n  description: propTypes.string,\n  onModalClick: propTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n\n// const ImageGalleryItem = ({ src, tags, openModal }) => {\n//   return (\n//     <li className={styles.ImageGalleryItem}>\n//       <img\n//         className={styles.ImageGalleryItem__image}\n//         src={src}\n//         alt={tags}\n//         onClick={openModal}\n//       />\n//     </li>\n//   );\n// };\n\n// export default ImageGalleryItem;\n\n// ImageGalleryItem.propTypes = {\n//   openModal: propTypes.func,\n// };\n","import ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport propTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport styles from './ImageGallery.module.css';\n\nconst ImageGallery = ({ images, onModalClick }) => {\n  return (\n    <ul className={styles.ImageGallery}>\n      {images.map(({ id, webformatURL, largeImageURL, tags }, index) => (\n        <ImageGalleryItem\n          onModalClick={() => onModalClick(index)}\n          key={`${id}-${uuidv4()}`}\n          image={webformatURL}\n          modalImage={largeImageURL}\n          description={tags.split(',')[0]}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default ImageGallery;\n\nImageGallery.propTypes = {\n  images: propTypes.array,\n  onModalClick: propTypes.func,\n};\n","import Loader from 'react-loader-spinner';\nimport styles from './Loader.module.css';\n\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst LoaderSpinner = () => {\n  return (\n    <Loader\n      className={styles.Loader}\n      type=\"ThreeDots\"\n      color=\"#fc0362\"\n      height={80}\n      width={80}\n    />\n  );\n};\n\nexport default LoaderSpinner;\n","import { useEffect } from 'react';\n// import { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport styles from './Modal.module.css';\n\nfunction Modal({ onModalClick, currentImage }) {\n  useEffect(() => {\n    window.addEventListener('keydown', closeModalByEsc);\n\n    return () => {\n      window.removeEventListener('keydown', closeModalByEsc);\n    };\n  });\n\n  const closeModalByEsc = e => {\n    if (e.code !== 'Escape') {\n      return;\n    }\n\n    onModalClick();\n  };\n\n  const closeModalByBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      onModalClick();\n    }\n  };\n\n  return (\n    <div className={styles.Overlay} onClick={closeModalByBackdropClick}>\n      <div className={styles.Modal}>\n        <img\n          src={currentImage.largeImageURL}\n          alt={currentImage.tags.split(',')[0]}\n        />\n      </div>\n    </div>\n  );\n}\n\nModal.propTypes = {\n  onModalClick: PropTypes.func.isRequired,\n  currentImage: PropTypes.object.isRequired,\n};\n\nexport default Modal;\n// const modalRoot = document.querySelector('#modal-root');\n\n// class Modal extends Component {\n//   componentDidMount() {\n//     window.addEventListener('keydown', this.handleKeyDown);\n//   }\n//   componentWillUnmount() {\n//     window.removeEventListener('keydown', this.handleKeyDown);\n//   }\n//   handleKeyDown = event => {\n//     if (event.code === 'Escape') {\n//       this.props.onClose();\n//     }\n//   };\n\n//   handleBackdropClick = e => {\n//     if (e.currentTarget === e.target) {\n//       this.props.onClose();\n//     }\n//   };\n\n//   render() {\n//     return createPortal(\n//       <div onClick={this.handleBackdropClick} className={styles.Overlay}>\n//         <div className={styles.Modal}>{this.props.children}</div>\n//       </div>,\n//       modalRoot,\n//     );\n//   }\n// }\n\n// export default Modal;\n\n// Modal.propTypes = {\n//   onClose: PropTypes.func,\n// };\n","import PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nfunction Button({ onSearch }) {\n  return (\n    <button type=\"button\" className={styles.Button} onClick={onSearch}>\n      Load more\n    </button>\n  );\n}\nexport default Button;\n\nButton.propTypes = {\n  onSearch: PropTypes.func.isRequired,\n};\n","const API_KEY = '22965571-072909f782f88cd625ec58d3c';\nconst BASE_URL = 'https://pixabay.com/api';\n\nclass ImageApi {\n  async fetchImageOrPhoto(searchQuery, page) {\n    const result = await fetch(\n      `${BASE_URL}/?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n    );\n\n    if (!result.ok) {\n      const message = `An error has occured: ${result.status}`;\n      throw new Error(message);\n    }\n\n    const { hits, totalHits } = await result.json();\n    return { hits, totalHits };\n  }\n}\n\nexport default ImageApi;\n","import { useEffect, useState } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\n\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport LoaderSpinner from './components/Loader/Loader';\nimport Modal from './components/Modal/Modal';\nimport Button from './components/Button/Button';\n\nimport ImageApi from './services/API';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\n\nconst image = new ImageApi();\n\nexport default function App() {\n  const [query, setQuery] = useState('');\n  const [images, setImages] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalImages, setTotalImages] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [showLoader, setShowLoader] = useState(false);\n  const [activeImageIndex, setActiveImageIndex] = useState(null);\n\n  useEffect(() => {\n    if (!query) {\n      return;\n    }\n\n    async function fetchImages() {\n      try {\n        setShowLoader(true);\n        const { hits, totalHits } = await image.fetchImageOrPhoto(\n          query,\n          currentPage,\n        );\n\n        if (!hits.length) {\n          toast.error('Enter proper query', { theme: 'colored' });\n        }\n\n        setImages(images => {\n          return [...images, ...hits];\n        });\n        setTotalImages(totalHits);\n      } catch (error) {\n        toast.error(error.message, { theme: 'colored' });\n      } finally {\n        setShowLoader(false);\n      }\n    }\n\n    fetchImages();\n  }, [currentPage, query]);\n\n  useEffect(() => {\n    if (images.length > 12) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }, [images.length]);\n\n  const modalToggle = index => {\n    setShowModal(!showModal);\n    setActiveImageIndex(index);\n  };\n\n  const handleSubmit = value => {\n    if (value === '') {\n      toast.error('No query entered yet...', { theme: 'colored' });\n      return;\n    }\n\n    setQuery(value);\n    setImages([]);\n    setCurrentPage(1);\n  };\n\n  const loadMoreImages = () => {\n    if (images.length === totalImages) {\n      toast.error('There is no more images to show', { theme: 'colored' });\n      return;\n    }\n\n    setCurrentPage(currentPage => currentPage + 1);\n  };\n\n  return (\n    <>\n      <div className=\"App\">\n        <ToastContainer\n          autoClose={3000}\n          pauseOnFocusLoss={false}\n          draggable={false}\n          pauseOnHover={false}\n        />\n        <Searchbar onSubmit={handleSubmit} />\n\n        {images.length > 1 && (\n          <>\n            <ImageGallery images={images} onModalClick={modalToggle} />\n            {!showLoader && <Button onSearch={loadMoreImages} />}\n          </>\n        )}\n\n        {showLoader && <LoaderSpinner />}\n\n        {showModal && (\n          <Modal\n            currentImage={images[activeImageIndex]}\n            onModalClick={modalToggle}\n          />\n        )}\n      </div>\n    </>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2qdLO\",\"SearchForm\":\"Searchbar_SearchForm__3MdOF\",\"SearchForm__button\":\"Searchbar_SearchForm__button__3EAG5\",\"SearchForm__button_label\":\"Searchbar_SearchForm__button_label__FVKsD\",\"SearchForm__input\":\"Searchbar_SearchForm__input__1HaJd\",\"SearchForm-input\":\"Searchbar_SearchForm-input__25D5w\"};"],"sourceRoot":""}